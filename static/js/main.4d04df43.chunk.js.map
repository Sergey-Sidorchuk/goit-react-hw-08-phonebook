{"version":3,"sources":["redux/contacts/actions.js","Components/Navigation/Navigation.module.css","Components/AuthNav/AuthNav.module.css","Components/UserMenu/UserMenu.module.css","redux/contacts/selectors.js","redux/contacts/operation.js","redux/contacts/reducer.js","Components/Container/Container.js","Components/Container/Container.module.css","Components/AppBar/AppBar.module.css","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","Components/Navigation/Navigation.js","Components/UserMenu/defaultAvatar.png","Components/UserMenu/UserMenu.js","Components/AuthNav/AuthNav.js","Components/AppBar/AppBar.js","Components/PrivateRoute.js","Components/PublicRoute.js","App.js","redux/store.js","index.js"],"names":["fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","filterContact","module","exports","getContacts","state","contacts","item","getFilter","filter","contactsSelectors","getError","error","getLoading","loading","getVisibleContacts","createSelector","value","normalizeFilter","toLowerCase","name","includes","contactsOperations","fetchContacts","dispatch","a","axios","get","data","addContact","number","contact","post","deleteContact","contactId","delete","createReducer","_","payload","id","response","combineReducers","Container","children","className","style","container","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","logIn","operations","logOut","fetchCurrentUser","thunkAPI","getState","persistedToken","auth","rejectWithValue","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","getIsFetchingCurrent","isFetchingCurrentUser","authSlice","createSlice","initialState","email","extraReducers","authOperations","fulfilled","action","pending","rejected","Navigation","isAuthenticated","useSelector","to","exact","styles","link","activeClassName","activeLink","UserMenu","useDispatch","onLogout","useCallback","src","defaultAvatar","alt","width","avatar","type","onClick","AuthNav","activeStyle","AppBar","header","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","HomeView","lazy","RegisterView","LoginView","ContactsView","App","useEffect","fallback","path","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4d04df43.chunk.js","sourcesContent":["import { createAction } from \"@reduxjs/toolkit\";\r\n\r\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\r\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\r\nexport const fetchContactError = createAction('contacts/fetchContactError');\r\n\r\nexport const addContactRequest = createAction('contacts/addContactRequest');\r\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\r\nexport const addContactError = createAction('contacts/addContactError');\r\n\r\nexport const deleteContactRequest = createAction('contacts/deleteContactRequest');\r\nexport const deleteContactSuccess = createAction('contacts/deleteContactSuccess');\r\nexport const deleteContactError = createAction('contacts/deleteContactError');\r\n\r\nexport const filterContact = createAction('contacts/filterContact');","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__3I9qM\",\"activeLink\":\"Navigation_activeLink__HZuEh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__1QVjm\",\"activeLink\":\"AuthNav_activeLink__Yq24b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__1Xc5y\",\"avatar\":\"UserMenu_avatar__3Ctlz\",\"name\":\"UserMenu_name__23qZ0\"};","import { createSelector } from '@reduxjs/toolkit';\r\n\r\nconst getContacts = state => state.contacts.item;\r\nconst getFilter = state => state.contacts.filter;\r\nconst getError = state => state.contacts.error;\r\nconst getLoading = state => state.contacts.loading;\r\n\r\nconst getVisibleContacts = createSelector(\r\n    [getContacts, getFilter],\r\n    (contacts, value) => {\r\n        const normalizeFilter = value.toLowerCase();\r\n        return contacts.filter(({name}) =>\r\n            name.toLowerCase().includes(normalizeFilter),\r\n        );\r\n    },\r\n);\r\n\r\nconst contactsSelectors = {\r\n    getContacts,\r\n    getFilter,\r\n    getError,\r\n    getLoading,\r\n    getVisibleContacts,\r\n};\r\n\r\nexport default contactsSelectors;","import axios from 'axios';\r\nimport {\r\n    addContactError,\r\n    addContactRequest,\r\n    addContactSuccess,\r\n    deleteContactError,\r\n    deleteContactRequest,\r\n    deleteContactSuccess,\r\n    fetchContactError,\r\n    fetchContactRequest,\r\n    fetchContactSuccess\r\n} from './actions';\r\n\r\n\r\nconst fetchContacts = () => async dispatch => {\r\n    dispatch(fetchContactRequest());\r\n\r\n    try {\r\n        const { data } = await axios.get('/contacts');\r\n\r\n        dispatch(fetchContactSuccess(data));\r\n    } catch (error) {\r\n        dispatch(fetchContactError(error));\r\n    }\r\n\r\n    // axios\r\n    //     .get('/contacts')\r\n    //     .then(({ data }) => dispatch(fetchContactSuccess(data)))\r\n    //     .catch(error => dispatch(fetchContactError(error)));\r\n};\r\n\r\nconst addContact = ({ name, number }) => async dispatch => {\r\n    const contact = {\r\n        name,\r\n        number,\r\n    };\r\n\r\n    dispatch(addContactRequest());\r\n\r\n    try {\r\n        const { data } = await axios.post(`/contacts`, contact);\r\n\r\n        dispatch(addContactSuccess(data));\r\n    } catch (error) {\r\n        dispatch(addContactError(error));\r\n    }\r\n\r\n    // axios\r\n    //     .post('/contacts', contact)\r\n    //     .then(({ data }) => dispatch(addContactSuccess(data)))\r\n    //     .catch(error => dispatch(addContactError(error)));\r\n};\r\n\r\nconst deleteContact = contactId => async dispatch => {\r\n    dispatch(deleteContactRequest());\r\n\r\n    try {\r\n        await axios.delete(`/contacts/${contactId}`);\r\n        dispatch(deleteContactSuccess(contactId));\r\n    } catch (error) {\r\n        dispatch(deleteContactError(error));\r\n    }\r\n\r\n    // axios\r\n    //     .delete(`/contacts/${contactId}`)\r\n    //     .then(() => dispatch(deleteContactSuccess(contactId)))\r\n    //     .catch(error => dispatch(deleteContactError(error)));\r\n};\r\n\r\nconst contactsOperations = {\r\n    fetchContacts,\r\n    addContact,\r\n    deleteContact,\r\n};\r\n\r\nexport default contactsOperations;","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport {\r\n    addContactError,\r\n    addContactRequest,\r\n    addContactSuccess,\r\n    deleteContactError,\r\n    deleteContactRequest,\r\n    deleteContactSuccess,\r\n    fetchContactError,\r\n    fetchContactRequest,\r\n    fetchContactSuccess,\r\n    filterContact,\r\n} from './actions';\r\n\r\nconst item = createReducer([], {\r\n    [fetchContactSuccess]: (_, { payload }) => payload,\r\n    [addContactSuccess]: (state, { payload }) => [...state, payload],\r\n    [deleteContactSuccess]: (state, { payload }) => state.filter(({id}) => id !== payload),\r\n});\r\n\r\nconst filter = createReducer('', {\r\n    [filterContact]: (_, { payload }) => payload,\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n    [fetchContactRequest]: () => true,\r\n    [fetchContactSuccess]: () => false,\r\n    [fetchContactError]: () => false,\r\n    [addContactRequest]: () => true,\r\n    [addContactSuccess]: () => false,\r\n    [addContactError]: () => false,\r\n    [deleteContactSuccess]: () => false,\r\n    [deleteContactRequest]: () => true,\r\n    [deleteContactError]: () => false,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n    [fetchContactRequest]: () => null,\r\n    [fetchContactError]: (_, { payload }) => payload.response.data,\r\n    [addContactRequest]: () => null,\r\n    [addContactError]: (_, { payload }) => payload.response.data,\r\n    [deleteContactRequest]: () => null,\r\n    [deleteContactError]: (_, { payload }) => payload.response.data,\r\n\r\n});\r\n\r\nexport default combineReducers({\r\n    item,\r\n    filter,\r\n    loading,\r\n    error,\r\n});","import React from 'react';\r\nimport style from'./Container.module.css';\r\n\r\nconst Container = ({ children }) => <div className={style.container}>{children}</div>;\r\n\r\nexport default Container;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__zH1DT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__3FCay\"};","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => { \r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    \r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n\r\n  }\r\n});\r\n\r\n\r\nconst logIn = createAsyncThunk('ayth/login', async credentials => {\r\n  try {\r\n    const {data} = await axios.post('/users/login', credentials);\r\n\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n\r\n  }\r\n});\r\n\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => { \r\n  try {\r\n    await axios.post('/users/logout');\r\n\r\n    token.unset();\r\n  } catch (error) {\r\n    \r\n  }\r\n});\r\n\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n    \r\n    if (persistedToken === null) {\r\n    return thunkAPI.rejectWithValue();\r\n  }\r\n\r\n  token.set(persistedToken);\r\n  try {\r\n    const {data} = await axios.get('/users/current');\r\n    return data;\r\n  } catch (error) {\r\n  }\r\n  });\r\n\r\n  const operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n\r\n\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getIsFetchingCurrent = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n    getIsLoggedIn,\r\n    getUsername,\r\n    getIsFetchingCurrent,\r\n};\r\nexport default authSelectors;","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { authSelectors } from '../../redux/auth';\r\nimport styles from './Navigation.module.css';\r\n\r\nexport default function Navigation() {\r\n    const isAuthenticated = useSelector(authSelectors.getIsLoggedIn);\r\n    return ( \r\n        <nav>\r\n            <NavLink\r\n                to=\"/\"\r\n                exact\r\n                className={styles.link}\r\n                activeClassName={styles.activeLink}\r\n            >\r\n                Home page\r\n            </NavLink>\r\n\r\n            {isAuthenticated && (\r\n                <NavLink\r\n                    to=\"/contacts\"\r\n                    exact\r\n                    className={styles.link}\r\n                    activeClassName={styles.activeLink}\r\n                >\r\n                    Contacts\r\n                </NavLink>\r\n            )}\r\n        </nav>\r\n    )};\r\n\r\n","export default __webpack_public_path__ + \"static/media/defaultAvatar.1b18c63f.png\";","import { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\nimport defaultAvatar from './defaultAvatar.png';\r\nimport styles from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n    const dispatch = useDispatch();\r\n    const name = useSelector(authSelectors.getUsername);\r\n    const onLogout = useCallback(() => dispatch(authOperations.logOut()), [dispatch]);\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            <img src={defaultAvatar} alt=\"avatar\" width=\"32\" style={styles.avatar} />\r\n            <span style={styles.name}>Welcome, {name}</span>\r\n            \r\n            <button type=\"button\" onClick={onLogout}>\r\n                Exit\r\n            </button>\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styles from './AuthNav.module.css';\r\n\r\nexport default function AuthNav() {\r\n    return (\r\n        <div>\r\n            <NavLink\r\n                to=\"/register\"\r\n                exact\r\n                style={styles.link}\r\n                activeStyle={styles.activeLink}\r\n            >\r\n            Sign up\r\n            </NavLink>\r\n\r\n            <NavLink\r\n                to=\"/login\"\r\n                exact\r\n                style={styles.link}\r\n                activeStyle={styles.activeLink}\r\n            >\r\n            Sign in\r\n            </NavLink>\r\n        </div>\r\n    );\r\n};","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation';\r\nimport UserMenu from '../UserMenu';\r\nimport AuthNav from '../AuthNav';\r\nimport { authSelectors } from '../../redux/auth';\r\n\r\nimport styles from './AppBar.module.css'\r\n\r\nexport default function AppBar() {\r\n    const isAuthenticated = useSelector(authSelectors.getIsLoggedIn);\r\n    \r\n    return (\r\n    <header style={styles.header}>\r\n        <Navigation />\r\n        \r\n            {isAuthenticated ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n    );\r\n};","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\n\r\nexport default function PrivateRoute({\r\n    children,\r\n    redirectTo = '/',\r\n    ...routeProps\r\n}) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    \r\n        return (\r\n    \r\n            <Route {...routeProps}>\r\n        \r\n                {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n            \r\n            </Route>\r\n    );\r\n}","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\n\r\nexport default function PublicRoute({\r\n    children,\r\n    restricted = false,\r\n    redirectTo = '/',\r\n    ...routeProps\r\n}) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    const shouldRedirect = isLoggedIn && restricted;\r\n        return (\r\n    \r\n            <Route {...routeProps}>\r\n                \r\n                {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n            \r\n            </Route>\r\n    );\r\n}","import { useEffect, Suspense, lazy } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Switch } from 'react-router-dom';\r\nimport Container from './Components/Container';\r\nimport AppBar from './Components/AppBar';\r\nimport PrivateRoute from './Components/PrivateRoute';\r\nimport PublicRoute from './Components/PublicRoute';\r\nimport { authOperations, authSelectors } from './redux/auth';\r\n\r\nconst HomeView = lazy(() => import('./views/HomeView'));\r\nconst RegisterView = lazy(() => import('./views/RegisterView'));\r\nconst LoginView = lazy(() => import('./views/LoginView'));\r\nconst ContactsView = lazy(() => import('./views/ContactsView'));\r\n\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrent);\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n    }, [dispatch]);\r\n\r\n  return (\r\n    <Container>\r\n      {isFetchingCurrentUser ? (\r\n        <h1>Показываем React Skeleton</h1>\r\n      ) : (\r\n        <>\r\n          <AppBar />\r\n\r\n          <Switch>\r\n\r\n            <Suspense fallback={<h2>Loading...</h2>}>\r\n              \r\n              <PublicRoute exact path=\"/\">\r\n                <HomeView />\r\n              </PublicRoute>\r\n              <PublicRoute exact path=\"/register\" restricted>\r\n                <RegisterView />\r\n              </PublicRoute>\r\n              <PublicRoute exact path=\"/login\" redirectTo=\"/contacts\" restricted>\r\n                <LoginView />\r\n              </PublicRoute>\r\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\r\n                <ContactsView />\r\n              </PrivateRoute>\r\n              \r\n\r\n            </Suspense>\r\n\r\n          </Switch>\r\n        </>\r\n      )}\r\n    </Container>\r\n  )\r\n};","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n    persistStore,\r\n    persistReducer,\r\n    FLUSH,\r\n    REHYDRATE,\r\n    PAUSE,\r\n    PERSIST,\r\n    PURGE,\r\n    REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { contactsReducer } from './contacts';\r\nimport { authReducer } from './auth';\r\n\r\n\r\nconst middleware = [\r\n    ...getDefaultMiddleware({\r\n        serializableCheck: {\r\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n        },\r\n    }),\r\n];\r\n\r\nconst authPersistConfig = {\r\n    key: 'auth',\r\n    storage,\r\n    whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        auth: persistReducer(authPersistConfig, authReducer),\r\n        contacts: contactsReducer,\r\n    },\r\n    middleware,\r\n    devTools: process.env.NODE_ENV === \"development\",\r\n});\r\n\r\nexport const persistor = persistStore(store);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store, persistor } from './redux/store'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}